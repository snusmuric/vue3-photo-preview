{"version":3,"file":"vue3-photo-preview.esm.js","sources":["../src/symbols.ts","../src/PhotoProvider/useItems.ts","../src/PhotoProvider/useVisible.ts","../src/PhotoProvider/useIndex.ts","../src/PhotoView/Spinner.vue","../src/PhotoView/Spinner.vue?vue&type=template&id=bfba7e90&lang.js","../src/utils/getSuitableImageSize.ts","../src/PhotoView/useLoadImage.ts","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/now.js","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/debounce.js","../node_modules/lodash-es/throttle.js","../src/PhotoView/useWindowResize.ts","../src/types.ts","../src/utils/getAnimateOrigin.ts","../src/utils/isTouchDevice.ts","../src/constant.ts","../src/utils/withContinuousTap.ts","../src/utils/getPositionOnMoveOrScale.ts","../src/utils/getEdgeInfo.ts","../src/utils/getMultipleTouchPosition.ts","../src/PhotoView/useMoveImage.ts","../src/PhotoView/index.vue","../src/PhotoView/index.vue?vue&type=template&id=10b188d1&lang.js","../src/PhotoSlider/useBodyEffect.ts","../src/PhotoSlider/useInnerWidth.ts","../src/PhotoSlider/Close.vue","../src/PhotoSlider/Close.vue?vue&type=template&id=112c245a&lang.js","../src/PhotoSlider/ArrowLeft.vue","../src/PhotoSlider/ArrowLeft.vue?vue&type=template&id=6e2f760b&lang.js","../src/PhotoSlider/ArrowRight.vue","../src/PhotoSlider/ArrowRight.vue?vue&type=template&id=d5f73570&lang.js","../src/PhotoSlider/RotateLeft.vue","../src/PhotoSlider/RotateLeft.vue?vue&type=template&id=b2d23392&lang.js","../src/PhotoSlider/RotateRight.vue","../src/PhotoSlider/RotateRight.vue?vue&type=template&id=698afa9c&lang.js","../src/PhotoSlider/FlipHorizontal.vue","../src/PhotoSlider/FlipHorizontal.vue?vue&type=template&id=15ac38a6&lang.js","../src/PhotoSlider/FilpVertical.vue","../src/PhotoSlider/FilpVertical.vue?vue&type=template&id=9ff3a8dc&lang.js","../src/PhotoSlider/Download.vue","../src/PhotoSlider/Download.vue?vue&type=template&id=7428b2fd&lang.js","../src/PhotoSlider/useAnimationHandle.ts","../src/PhotoSlider/index.vue","../src/PhotoSlider/index.vue?vue&type=template&id=6c981bcd&lang.js","../src/PhotoProvider/index.vue","../src/PhotoProvider/index.vue?vue&type=template&id=4c12d6c6&lang.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/uniqueId.js","../src/PhotoConsumer/index.vue","../src/PhotoConsumer/index.vue?vue&type=template&id=1325df3c&lang.js","../src/index.ts"],"sourcesContent":["import { UpdateItemType, RemoveItemType, HandleShowType } from './types';\nimport { InjectionKey } from 'vue';\n\nexport const updateItemKey: InjectionKey<UpdateItemType> = Symbol();\n\nexport const removeItemKey: InjectionKey<RemoveItemType> = Symbol();\n\nexport const handleShowKey: InjectionKey<HandleShowType> = Symbol();\n","import { ref, Ref } from 'vue';\nimport { ItemType, UpdateItemType, RemoveItemType } from '../types';\n\ntype useItemsReturn = {\n  items: Ref<ItemType[]>;\n  updateItem: UpdateItemType;\n  removeItem: RemoveItemType;\n}\n\nexport default function useItems(index: Ref<number>): useItemsReturn {\n  const items = ref<ItemType[]>([]);\n\n  const updateItem = (item: ItemType) => {\n    const index = items.value.findIndex(({ key }) => item.key === key);\n    if (index > -1) {\n      items.value.splice(index, 1, item);\n    } else {\n      items.value.push(item);\n    }\n  };\n\n  const removeItem = (key: string) => {\n    const nextItems = items.value.filter((item) => item.key !== key);\n    const nextEndIndex = nextItems.length - 1;\n\n    items.value = nextItems;\n    index.value = Math.min(index.value, nextEndIndex);\n  };\n\n  return {\n    items,\n    updateItem,\n    removeItem,\n  };\n}\n","import { ref, Ref } from 'vue';\nimport { HandleShowType, ItemType } from '../types';\n\ntype useVisibleReturn = {\n  visible: Ref<boolean>;\n  handleHide: () => void;\n  handleShow: HandleShowType;\n}\n\nexport default function useVisible(\n  items: Ref<ItemType[]>,\n  index: Ref<number>,\n  onVisibleChange: () => void\n): useVisibleReturn {\n  const visible = ref(false);\n\n  const handleHide = () => {\n    visible.value = false;\n    onVisibleChange();\n  };\n\n  const handleShow = (key: string) => {\n    const itemIndex = items.value.findIndex(item => item.key === key);\n    if (itemIndex > -1) {\n      index.value = itemIndex;\n      visible.value = true;\n      onVisibleChange();\n    }\n  };\n\n  return {\n    visible,\n    handleHide,\n    handleShow,\n  };\n}\n","import { ref, Ref } from 'vue';\n\ntype useIndexReturn = {\n  index: Ref<number>;\n  updateIndex: (newIndex: number) => void;\n}\n\nexport default function useIndex(onIndexChange: () => void): useIndexReturn {\n  const index = ref(0);\n\n  const updateIndex = (newIndex: number) => {\n    index.value = newIndex;\n    onIndexChange();\n  };\n\n  return {\n    index,\n    updateIndex,\n  };\n}\n","<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n","export default function getSuitableImageSize(\n  naturalWidth: number,\n  naturalHeight: number,\n  rotate: number,\n): {\n  width: number;\n  height: number;\n} {\n  let { innerWidth, innerHeight } = window;\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [innerWidth, innerHeight] = [innerHeight, innerWidth];\n  }\n\n  let width;\n  let height;\n\n  // 缩放到和窗口一样所需要的比例\n  const scaleWidth = innerWidth / naturalWidth;\n  const scaleHeight = innerHeight / naturalHeight;\n\n  if (naturalWidth < innerWidth && naturalHeight < innerHeight) {\n    // 如果图片原始宽度未超过容器尺寸，则使用原始尺寸\n    width = naturalWidth;\n    height = naturalHeight;\n  } else {\n    // 否则缩放图片使之恰好放入\n    if (scaleWidth < scaleHeight) {\n      width = innerWidth;\n      height = innerWidth * (naturalHeight / naturalWidth);\n    } else {\n      width = innerHeight * (naturalWidth / naturalHeight);\n      height = innerHeight;\n    }\n  }\n\n  return {\n    width,\n    height\n  };\n}\n","import { ref, Ref, watch } from 'vue';\nimport getSuitableImageSize from '../utils/getSuitableImageSize';\n\nexport default function useLoadImage(src: Ref<string>): {\n  width: Ref<number>;\n  height: Ref<number>;\n  loaded: Ref<boolean>;\n  naturalWidth: Ref<number>;\n  naturalHeight: Ref<number>;\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void;\n} {\n  const naturalWidth = ref(0);\n  const naturalHeight = ref(0);\n  const width = ref(0);\n  const height = ref(0);\n  const loaded = ref(false);\n\n  function setSuitableImageSize(actualWidth: number, actualHeight: number, rotate: number) {\n    const imageSize = getSuitableImageSize(actualWidth, actualHeight, rotate);\n    width.value = imageSize.width;\n    height.value = imageSize.height;\n  }\n\n  const loadImage = (src: string) => {\n    loaded.value = false;\n\n    const img = new Image();\n\n    img.onload = () => {\n      naturalWidth.value = img.naturalWidth;\n      naturalHeight.value = img.naturalHeight;\n      setSuitableImageSize(naturalWidth.value, naturalHeight.value, 0);\n      loaded.value = true;\n    };\n\n    img.src = src;\n  };\n\n  loadImage(src.value);\n\n  watch(src, () => {\n    loadImage(src.value);\n  });\n\n  return {\n    width,\n    height,\n    loaded,\n    naturalWidth,\n    naturalHeight,\n    setSuitableImageSize\n  };\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import { Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useWindowResize(\n  naturalWidth: Ref<number>, naturalHeight: Ref<number>, rotate: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n): void {\n\n  const handleResize = throttle(() => {\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n}\n","export type ItemType = {\n  // 唯一标识\n  key: string;\n  // 图片地址\n  src: string;\n  // 控住图片显示的节点\n  originRef?: HTMLElement | null;\n  // 图片介绍\n  intro?: string | null;\n  // 图片下载名称\n  downloadName?: string | null;\n}\n\nexport type OriginRectType = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n} | null;\n\nexport type UpdateItemType = (item: ItemType) => void;\n\nexport type RemoveItemType = (key: string) => void;\n\nexport type HandleShowType = (key: string) => void;\n\n// 动画类型\nexport enum ShowAnimateEnum {\n  None,\n  In,\n  Out,\n}\n\n// 触摸状态\nexport enum TouchTypeEnum {\n  Normal,\n  X, // x 轴只能水平切换图片\n  Y, // y 轴只能撤销图片\n  Scale, // 缩放模式\n}\n\n// 边缘状态\nexport enum EdgeTypeEnum {\n  Left,\n  Right,\n  Top,\n  Bottom,\n}\n","import { OriginRectType } from \"../types\";\n\nexport default function getAnimateOrigin(originRect: OriginRectType): string | null {\n  if (originRect) {\n    const { innerWidth, innerHeight } = window;\n    // 动画的元素宽高为 0，计算触发的点的中心到中点的距离即是 AnimateOrigin（粗略计算）\n    const xOrigin = originRect.left + originRect.width / 2 - innerWidth / 2;\n    const yOrigin = originRect.top + originRect.height / 2 - innerHeight / 2;\n    return `${xOrigin}px ${yOrigin}px`;\n  }\n  return null;\n}\n","/**\n * 当前设备是否支持触摸事件\n */\nconst isTouchDevice = typeof document !== 'undefined' && 'ontouchstart' in document.documentElement;\n\nexport default isTouchDevice;\n","/**\n * 图片间隔\n */\nexport const horizontalOffset = 20;\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset = 10;\n\n/**\n * 最小切换图片距离\n */\nexport const minSwitchImageOffset = 40;\n\n/**\n * 最大缩放度（若图片足够大，则会超出该值）\n */\nexport const maxScale = 6;\n","import debounce from 'lodash-es/debounce';\n\nexport type TapFuncType<T> = (...args: T[]) => void;\n\nexport default function withContinuousTap<T>(\n  singleTap: TapFuncType<T>,\n  doubleTap: TapFuncType<T>\n): TapFuncType<T> {\n  // 当前连续点击次数\n  let continuousCount = 0;\n\n  const withSingleTap = debounce((...args) => {\n    continuousCount = 0;\n    singleTap(...args);\n  }, 300);\n\n  return function invokeTap(...args) {\n    continuousCount += 1;\n    withSingleTap(...args);\n    if (continuousCount >= 2) {\n      withSingleTap.cancel();\n      continuousCount = 0;\n      doubleTap(...args);\n    }\n  };\n}\n","/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale({\n  x,\n  y,\n  clientX,\n  clientY,\n  fromScale,\n  toScale\n}: {\n  x: number,\n  y: number,\n  clientX: number,\n  clientY: number,\n  fromScale: number,\n  toScale: number\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { innerWidth, innerHeight } = window;\n  // 缩放前的图片的中心坐标\n  const imageCenterClientX = innerWidth / 2 + x;\n  const imageCenterClientY = innerHeight / 2 + y;\n  // 放大偏移量\n  const offsetScale = toScale / fromScale;\n  // 缩放后的偏移量(为保证点击的点相对于视图位置不变，需要将缩放多出来的尺寸通过 translate 平衡掉)\n  const originX = -(clientX - imageCenterClientX) * (offsetScale - 1);\n  const originY = -(clientY - imageCenterClientY) * (offsetScale - 1);\n\n  return {\n    x: originX + x,\n    y: originY + y,\n    scale: toScale,\n  };\n}\n","import { EdgeTypeEnum } from '../types';\n\n/**\n * 获取图片拖拽到边缘需要的值\n */\nexport function getEdgeInfo({\n  width,\n  height,\n  scale,\n  rotate,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number\n}): {\n  edgeLeft: number,\n  edgeRight: number,\n  edgeTop: number,\n  edgeBottom: number,\n} {\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [width, height] = [height, width];\n  }\n\n  const { innerWidth, innerHeight } = window;\n  const currentWidth = width * scale;\n  const currentHeight = height * scale;\n\n  let edgeLeft, edgeRight, edgeTop, edgeBottom;\n\n  if (currentWidth > innerWidth) {\n    edgeLeft = (currentWidth - innerWidth) / 2;\n    edgeRight = -(currentWidth - innerWidth) / 2;\n  } else {\n    edgeLeft = 0;\n    edgeRight = 0;\n  }\n\n  if (currentHeight > innerHeight) {\n    edgeTop = (currentHeight - innerHeight) / 2;\n    edgeBottom = -(currentHeight - innerHeight) / 2;\n  } else {\n    edgeTop = 0;\n    edgeBottom = 0;\n  }\n\n  return {\n    edgeLeft,\n    edgeRight,\n    edgeTop,\n    edgeBottom,\n  };\n}\n\n/**\n * 获取边缘类型\n */\nexport function getEdgeTypes({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): EdgeTypeEnum[] {\n  const position = getEdgeInfo({ width, height, scale, rotate });\n  const edgeTypes: EdgeTypeEnum[] = [];\n\n  if (x === position.edgeLeft) {\n    edgeTypes.push(EdgeTypeEnum.Left);\n  }\n  if (x === position.edgeRight) {\n    edgeTypes.push(EdgeTypeEnum.Right);\n  }\n  if (y === position.edgeTop) {\n    edgeTypes.push(EdgeTypeEnum.Top);\n  }\n  if (y === position.edgeBottom) {\n    edgeTypes.push(EdgeTypeEnum.Bottom);\n  }\n\n  return edgeTypes;\n}\n\n/**\n * 获取标准值\n */\nexport function getStandardPosition({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { edgeLeft, edgeRight, edgeTop, edgeBottom } = getEdgeInfo({ width, height, scale, rotate });\n\n  if (x > edgeLeft) {\n    x = edgeLeft;\n  }\n  if (x < edgeRight) {\n    x = edgeRight;\n  }\n  if (y > edgeTop) {\n    y = edgeTop;\n  }\n  if (y < edgeBottom) {\n    y = edgeBottom;\n  }\n\n  return { x, y, scale };\n}\n","/**\n * 从 Touch 事件中获取两个触控中心的位置\n * @param e TouchEvent\n */\nexport default function getMultipleTouchPosition(e: TouchEvent): {\n  clientX: number,\n  clientY: number,\n  touchLength: number\n} {\n  const { clientX, clientY } = e.touches[0];\n  if (e.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = e.touches[1];\n    return {\n      clientX: (clientX + nextClientX) / 2,\n      clientY: (clientY + nextClientY) / 2,\n      touchLength: Math.sqrt(Math.pow(nextClientX - clientX, 2) + Math.pow(nextClientY - clientY, 2)),\n    };\n  }\n  return { clientX, clientY, touchLength: 0 };\n}\n","import { Ref, ref } from 'vue';\nimport isTouchDevice from '../utils/isTouchDevice';\nimport throttle from 'lodash-es/throttle';\nimport { TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport { minStartTouchOffset, maxScale } from '../constant';\nimport withContinuousTap from '../utils/withContinuousTap';\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale';\nimport { getStandardPosition, getEdgeTypes } from '../utils/getEdgeInfo';\nimport getMultipleTouchPosition from '../utils/getMultipleTouchPosition';\n\ntype useMoveImageReturn = {\n  x: Ref<number>;\n  y: Ref<number>;\n  scale: Ref<number>;\n  rotate: Ref<number>;\n  touched: Ref<boolean>;\n  handleMouseDown: (e: MouseEvent) => void;\n  handleTouchStart: (e: TouchEvent) => void;\n  handleWheel: (e: WheelEvent) => void;\n  handleRotateLeft: () => void;\n  handleRotateRight: () => void;\n}\n\nexport default function useMoveImage(\n  width: Ref<number>,\n  height: Ref<number>,\n  naturalWidth: Ref<number>,\n  naturalHeight: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n  onTouchStart: (clientX: number, clientY: number) => void,\n  onTouchMove: (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onTouchEnd: (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onSingleTap: (clientX: number, clientY: number) => void,\n): useMoveImageReturn {\n  // 图片 x 偏移量\n  const x = ref(0);\n  // 图片 y 偏移量\n  const y = ref(0);\n  // 图片缩放程度\n  const scale = ref(1);\n  // 图片旋转角度\n  const rotate = ref(0);\n  // 图片是否处于触摸状态\n  const touched = ref(false);\n  // 触摸开始时 x 的坐标\n  const clientX = ref(0);\n  // 触摸开始时 y 的坐标\n  const clientY = ref(0);\n  // 初始触摸状态\n  const touchType = ref(TouchTypeEnum.Normal);\n  // 上一次图片的 x 偏移量\n  const lastX = ref(0);\n  // 上一次图片的 y 偏移量\n  const lastY = ref(0);\n  // 上一次 touch 的长度\n  const lastTouchLength = ref(0);\n  // 边缘状态(用于缩放图片判断)\n  let edgeTypes: EdgeTypeEnum[] = [];\n\n  const handleMouseDown = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleDown(e.clientX, e.clientY, 0);\n\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchStart = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleDown(touch.clientX, touch.clientY, touch.touchLength);\n\n    window.addEventListener('touchmove', handleTouchMove);\n    window.addEventListener('touchend', handleTouchEnd);\n  };\n\n  const handleDown = (newClientX: number, newClientY: number, touchLength: number) => {\n    touched.value = true;\n    clientX.value = newClientX;\n    clientY.value = newClientY;\n    lastTouchLength.value = touchLength;\n    edgeTypes = getEdgeTypes({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: lastX.value,\n      y: lastY.value\n    });\n\n    onTouchStart(newClientX, newClientY);\n  };\n\n  const handleMouseMove = (e: MouseEvent) => {\n    if (isTouchDevice || !touched.value) return;\n\n    handleMove(e.clientX, e.clientY, 0);\n  };\n\n  const handleTouchMove = (e: TouchEvent) => {\n    if (!isTouchDevice || !touched.value) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleMove(touch.clientX, touch.clientY, touch.touchLength);\n  };\n\n  const handleMove = throttle((newClientX: number, newClientY: number, touchLength: number) => {\n    // 初始化触摸状态\n    if (touchType.value === TouchTypeEnum.Normal) {\n      if (scale.value !== 1 || touchLength) {\n        touchType.value = TouchTypeEnum.Scale;\n      } else {\n        const isMoveX = Math.abs(newClientX - clientX.value) > minStartTouchOffset;\n        const isMoveY = Math.abs(newClientY - clientY.value) > minStartTouchOffset;\n\n        if (!isMoveX && !isMoveY) return;\n\n        // 水平方向优先\n        touchType.value = isMoveX ? TouchTypeEnum.X : TouchTypeEnum.Y;\n      }\n    }\n\n    onTouchMove(touchType.value, newClientX, newClientY, edgeTypes);\n\n    const newX = newClientX - clientX.value;\n    const newY = newClientY - clientY.value;\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = newX + lastX.value;\n      y.value = newY + lastY.value;\n    }\n    if (touchType.value === TouchTypeEnum.Scale) {\n      if (touchLength) {\n        const endScale = scale.value + ((touchLength - lastTouchLength.value) / 100 / 2) * scale.value;\n        const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n        handleToScale(toScale, newClientX, newClientY);\n        lastTouchLength.value = touchLength;\n      } else {\n        // 处于左边缘情况，右划交给父级处理，处于右边缘情况，左划交给父级处理\n        if (\n          !(newX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) &&\n          !(newX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n        ) {\n          x.value = newX + lastX.value;\n        }\n        y.value = newY + lastY.value;\n      }\n    }\n  }, 8, { trailing: false });\n\n  const handleMouseUp = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleUp(e.clientX, e.clientY);\n\n    window.removeEventListener('mousemove', handleMouseMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = e.changedTouches[0];\n    handleUp(touch.clientX, touch.clientY);\n\n    window.removeEventListener('touchmove', handleTouchMove);\n    window.removeEventListener('touchend', handleTouchEnd);\n  };\n\n  const onDoubleTap = (newClientX: number, newClientY: number) => {\n    if (touchType.value !== TouchTypeEnum.Normal) return;\n\n    if (scale.value === 1) {\n      const toScale = Math.max(2, naturalWidth.value / width.value);\n      const position = getPositionOnMoveOrScale({\n        x: x.value,\n        y: y.value,\n        clientX: newClientX,\n        clientY: newClientY,\n        fromScale: scale.value,\n        toScale,\n      });\n\n      x.value = position.x;\n      y.value = position.y;\n      scale.value = position.scale;\n    } else {\n      x.value = 0;\n      y.value = 0;\n      scale.value = 1;\n    }\n  };\n\n  const onTap = withContinuousTap<number>(onSingleTap, onDoubleTap);\n\n  const handleUp = (newClientX: number, newClientY: number) => {\n    if (clientX.value === newClientX && clientY.value === newClientY) {\n      onTap(newClientX, newClientY);\n    }\n\n    onTouchEnd(touchType.value, newClientX, newClientY, edgeTypes);\n\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = 0;\n      y.value = 0;\n    }\n\n    if (touchType.value === TouchTypeEnum.Scale) {\n      setStandardPosition({\n        width: width.value,\n        height: height.value,\n        scale: scale.value,\n        rotate: rotate.value,\n        x: x.value,\n        y: y.value\n      });\n    }\n\n    touched.value = false;\n    touchType.value = TouchTypeEnum.Normal;\n    clientX.value = 0;\n    clientY.value = 0;\n    lastX.value = x.value;\n    lastY.value = y.value;\n  };\n\n  const handleWheel = (e: WheelEvent) => {\n    const endScale = scale.value - e.deltaY / 100 / 2;\n    const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n    handleToScale(toScale, e.clientX, e.clientY);\n  };\n\n  const handleToScale = (newScale: number, newClientX: number, newClientY: number) => {\n    const position = getPositionOnMoveOrScale({\n      x: x.value,\n      y: y.value,\n      clientX: newClientX,\n      clientY: newClientY,\n      fromScale: scale.value,\n      toScale: newScale,\n    });\n\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: position.scale,\n      rotate: rotate.value,\n      x: position.x,\n      y: position.y\n    });\n  };\n\n  const setStandardPosition = (position: {\n    width: number; height: number; scale: number; rotate: number; x: number, y: number\n  }) => {\n    const standardPosition = getStandardPosition(position);\n    x.value = standardPosition.x;\n    y.value = standardPosition.y;\n    lastX.value = standardPosition.x;\n    lastY.value = standardPosition.y;\n    scale.value = standardPosition.scale;\n  };\n\n  const handleRotateLeft = () => {\n    rotate.value = rotate.value - 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  const handleRotateRight = () => {\n    rotate.value = rotate.value + 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  return {\n    x,\n    y,\n    scale,\n    touched,\n    handleMouseDown,\n    handleTouchStart,\n    handleWheel,\n    rotate,\n    handleRotateLeft,\n    handleRotateRight\n  };\n}\n","<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect)\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :width=\"width\"\n        :height=\"height\"\n        :src=\"src\"\n        :style=\"{\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number) => {\n      emit('singleTap', clientX, clientY);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const transform: Record<string, string> = {\n        translate3d: `${this.x}px, ${this.y}px, 0`,\n        scaleX: `${this.isFlipHorizontal ? '-' : ''}${this.scale}`,\n        scaleY: `${this.isFlipVertical ? '-' : ''}${this.scale}`\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      cursor: grab;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect)\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :width=\"width\"\n        :height=\"height\"\n        :src=\"src\"\n        :style=\"{\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number) => {\n      emit('singleTap', clientX, clientY);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const transform: Record<string, string> = {\n        translate3d: `${this.x}px, ${this.y}px, 0`,\n        scaleX: `${this.isFlipHorizontal ? '-' : ''}${this.scale}`,\n        scaleY: `${this.isFlipVertical ? '-' : ''}${this.scale}`\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      cursor: grab;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n","import { Ref, watch } from \"vue\";\n\nexport default function useBodyEffect(\n  visible: Ref<boolean>,\n  rootElement?: string | HTMLElement\n): void {\n  const root =\n    rootElement && typeof rootElement === \"string\"\n      ? (document.querySelector(rootElement) as HTMLElement)\n      : (rootElement as HTMLElement);\n  const { style } = root ? root : document.body;\n  const originalOverflow = style.overflow;\n\n  watch(visible, () => {\n    if (visible.value) {\n      style.overflow = \"hidden\";\n    } else {\n      style.overflow = originalOverflow;\n    }\n  });\n}\n","import { ref, Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useInnerWidth(): { innerWidth: Ref<number> } {\n  const innerWidth = ref(window.innerWidth);\n\n  const handleResize = throttle(() => {\n    innerWidth.value = window.innerWidth;\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n\n  return {\n    innerWidth\n  };\n}\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","import { Ref, ref, watch } from 'vue';\nimport { ItemType, ShowAnimateEnum, OriginRectType } from '../types';\n\ntype useAnimationHandleReturn = {\n  photoVisible: Ref<boolean>;\n  showAnimateType: Ref<ShowAnimateEnum>;\n  originRect: Ref<OriginRectType>;\n  onShowAnimateEnd: () => void;\n}\n\nexport default function useAnimationHandle(visible: Ref<boolean>, currentItem: Ref<ItemType>): useAnimationHandleReturn {\n  const photoVisible = ref(visible.value);\n  const showAnimateType = ref<ShowAnimateEnum>(ShowAnimateEnum.None);\n  const originRect = ref<OriginRectType>(null);\n\n  watch(visible, () => {\n    const originRef = currentItem.value.originRef;\n    // 点击打开按钮和关闭时收集位置信息，用于过渡动画\n    if (originRef && originRef.nodeType === 1 && originRef.children.length > 0) {\n      const { top, left, width, height } = originRef.getBoundingClientRect();\n      originRect.value = {\n        left, top, width, height\n      };\n    } else {\n      originRect.value = null;\n    }\n\n    if (visible.value) {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.In;\n      // 显示图片\n      photoVisible.value = true;\n    } else {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.Out;\n    }\n  });\n\n  // 动画结束的回调\n  const onShowAnimateEnd = () => {\n    // 动画完成才关闭弹窗\n    if (showAnimateType.value === ShowAnimateEnum.Out) {\n      photoVisible.value = false;\n    }\n    showAnimateType.value = ShowAnimateEnum.None;\n  };\n\n  return {\n    photoVisible,\n    showAnimateType,\n    originRect,\n    onShowAnimateEnd\n  };\n}\n","<template>\n  <teleport :to=\"teleportTo\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        PhotoSlider__Clean: showAnimateType !== ShowAnimateEnum.None,\n        PhotoSlider__Hide: !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          PhotoSlider__fadeIn: showAnimateType === ShowAnimateEnum.In,\n          PhotoSlider__fadeOut: showAnimateType === ShowAnimateEnum.Out,\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download class=\"PhotoSlider__BannerIcon\" @click=\"handleDownload\" />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <filp-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close class=\"PhotoSlider__BannerIcon\" @click=\"handleClickClose\" />\n        </div>\n      </div>\n      <div\n        v-for=\"item in items\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: `${(innerWidth + horizontalOffset) * getItemIndex(item)}px`,\n          transition: getTransition(),\n          transform: `translate3d(${\n            -(innerWidth + horizontalOffset) * index + touchMoveX\n          }px, 0px, 0px)`,\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"setPhotoViewRef\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop=\"handleClickPhoto\"\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div v-if=\"currentItem.intro\" class=\"PhotoSlider__FooterWrap\">\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, toRefs, PropType } from \"vue\";\nimport PhotoView from \"../PhotoView/index.vue\";\nimport { horizontalOffset, minSwitchImageOffset } from \"../constant\";\nimport useBodyEffect from \"./useBodyEffect\";\nimport useInnerWidth from \"./useInnerWidth\";\nimport Close from \"./Close.vue\";\nimport ArrowLeft from \"./ArrowLeft.vue\";\nimport ArrowRight from \"./ArrowRight.vue\";\nimport RotateLeft from \"./RotateLeft.vue\";\nimport RotateRight from \"./RotateRight.vue\";\nimport FlipHorizontal from \"./FlipHorizontal.vue\";\nimport FilpVertical from \"./FilpVertical.vue\";\nimport Download from \"./Download.vue\";\nimport useAnimationHandle from \"./useAnimationHandle\";\nimport {\n  ItemType,\n  ShowAnimateEnum,\n  TouchTypeEnum,\n  EdgeTypeEnum,\n} from \"../types\";\nimport isTouchDevice from \"../utils/isTouchDevice\";\n\nexport default defineComponent({\n  name: \"PhotoSlider\",\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FilpVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * Specifies a place in a DOM (target container) where PhotoSlider will be injected\n     * Could bequery selector or HtmlElement\n     */\n    teleportTo: {\n      type: [String, HTMLElement],\n      default: \"body\",\n    },\n  },\n  emits: [\"clickPhoto\", \"clickMask\", \"changeIndex\", \"closeModal\", \"singleTap\"],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible, props.teleportTo);\n    const { photoVisible, showAnimateType, originRect, onShowAnimateEnd } =\n      useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // photo-view 子组件\n      photoViewRefs: [] as InstanceType<typeof PhotoView>[],\n    };\n  },\n  created() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = [];\n  },\n  methods: {\n    handleDownload() {\n      const item = this.items[this.index];\n      const a = document.createElement(\"a\");\n      const paths = item.src.split(\".\")[0].split(\"/\");\n      const name = paths[paths.length - 1];\n      a.download = item.downloadName || name;\n      a.href = item.src;\n      a.dispatchEvent(new MouseEvent(\"click\"));\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.index].toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.index].toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.index].handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.index].handleRotateRight();\n    },\n    setPhotoViewRef(ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs.push(ref);\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case \"ArrowLeft\":\n            this.handlePrevious();\n            break;\n          case \"ArrowRight\":\n            this.handleNext();\n            break;\n          case \"Escape\":\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap() {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit(\"singleTap\");\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 第一张和最后一张超出时拖拽距离减半\n      if (\n        (this.index === 0 && touchMoveX > 0) ||\n        (this.index === this.items.length - 1 && touchMoveX < 0)\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(\n          this.defaultBackdropOpacity,\n          this.defaultBackdropOpacity - touchMoveY / 100 / 4\n        ),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (\n        offsetX < -minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Right)\n      ) {\n        this.handleNext();\n      }\n      // 上一张\n      if (\n        offsetX > minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Left)\n      ) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit(\"closeModal\");\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    getItemIndex(item: ItemType) {\n      return this.items.findIndex(({ key }) => key === item.key);\n    },\n    handlePrevious() {\n      if (this.index > 0) {\n        this.$emit(\"changeIndex\", this.index - 1);\n      }\n    },\n    handleNext() {\n      if (this.index < this.items.length - 1) {\n        this.$emit(\"changeIndex\", this.index + 1);\n      }\n    },\n    handleClickPhoto(e: MouseEvent) {\n      this.$emit(\"clickPhoto\", e);\n    },\n    handleClickMask(e: MouseEvent) {\n      this.$emit(\"clickMask\", e);\n    },\n    handleClickClose() {\n      this.$emit(\"closeModal\");\n    },\n    getTransition() {\n      const transition = \"transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)\";\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover) {\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <teleport :to=\"teleportTo\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        PhotoSlider__Clean: showAnimateType !== ShowAnimateEnum.None,\n        PhotoSlider__Hide: !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          PhotoSlider__fadeIn: showAnimateType === ShowAnimateEnum.In,\n          PhotoSlider__fadeOut: showAnimateType === ShowAnimateEnum.Out,\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download class=\"PhotoSlider__BannerIcon\" @click=\"handleDownload\" />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <filp-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close class=\"PhotoSlider__BannerIcon\" @click=\"handleClickClose\" />\n        </div>\n      </div>\n      <div\n        v-for=\"item in items\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: `${(innerWidth + horizontalOffset) * getItemIndex(item)}px`,\n          transition: getTransition(),\n          transform: `translate3d(${\n            -(innerWidth + horizontalOffset) * index + touchMoveX\n          }px, 0px, 0px)`,\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"setPhotoViewRef\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop=\"handleClickPhoto\"\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div v-if=\"currentItem.intro\" class=\"PhotoSlider__FooterWrap\">\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, toRefs, PropType } from \"vue\";\nimport PhotoView from \"../PhotoView/index.vue\";\nimport { horizontalOffset, minSwitchImageOffset } from \"../constant\";\nimport useBodyEffect from \"./useBodyEffect\";\nimport useInnerWidth from \"./useInnerWidth\";\nimport Close from \"./Close.vue\";\nimport ArrowLeft from \"./ArrowLeft.vue\";\nimport ArrowRight from \"./ArrowRight.vue\";\nimport RotateLeft from \"./RotateLeft.vue\";\nimport RotateRight from \"./RotateRight.vue\";\nimport FlipHorizontal from \"./FlipHorizontal.vue\";\nimport FilpVertical from \"./FilpVertical.vue\";\nimport Download from \"./Download.vue\";\nimport useAnimationHandle from \"./useAnimationHandle\";\nimport {\n  ItemType,\n  ShowAnimateEnum,\n  TouchTypeEnum,\n  EdgeTypeEnum,\n} from \"../types\";\nimport isTouchDevice from \"../utils/isTouchDevice\";\n\nexport default defineComponent({\n  name: \"PhotoSlider\",\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FilpVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * Specifies a place in a DOM (target container) where PhotoSlider will be injected\n     * Could bequery selector or HtmlElement\n     */\n    teleportTo: {\n      type: [String, HTMLElement],\n      default: \"body\",\n    },\n  },\n  emits: [\"clickPhoto\", \"clickMask\", \"changeIndex\", \"closeModal\", \"singleTap\"],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible, props.teleportTo);\n    const { photoVisible, showAnimateType, originRect, onShowAnimateEnd } =\n      useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // photo-view 子组件\n      photoViewRefs: [] as InstanceType<typeof PhotoView>[],\n    };\n  },\n  created() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = [];\n  },\n  methods: {\n    handleDownload() {\n      const item = this.items[this.index];\n      const a = document.createElement(\"a\");\n      const paths = item.src.split(\".\")[0].split(\"/\");\n      const name = paths[paths.length - 1];\n      a.download = item.downloadName || name;\n      a.href = item.src;\n      a.dispatchEvent(new MouseEvent(\"click\"));\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.index].toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.index].toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.index].handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.index].handleRotateRight();\n    },\n    setPhotoViewRef(ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs.push(ref);\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case \"ArrowLeft\":\n            this.handlePrevious();\n            break;\n          case \"ArrowRight\":\n            this.handleNext();\n            break;\n          case \"Escape\":\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap() {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit(\"singleTap\");\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 第一张和最后一张超出时拖拽距离减半\n      if (\n        (this.index === 0 && touchMoveX > 0) ||\n        (this.index === this.items.length - 1 && touchMoveX < 0)\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(\n          this.defaultBackdropOpacity,\n          this.defaultBackdropOpacity - touchMoveY / 100 / 4\n        ),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (\n        offsetX < -minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Right)\n      ) {\n        this.handleNext();\n      }\n      // 上一张\n      if (\n        offsetX > minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Left)\n      ) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit(\"closeModal\");\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    getItemIndex(item: ItemType) {\n      return this.items.findIndex(({ key }) => key === item.key);\n    },\n    handlePrevious() {\n      if (this.index > 0) {\n        this.$emit(\"changeIndex\", this.index - 1);\n      }\n    },\n    handleNext() {\n      if (this.index < this.items.length - 1) {\n        this.$emit(\"changeIndex\", this.index + 1);\n      }\n    },\n    handleClickPhoto(e: MouseEvent) {\n      this.$emit(\"clickPhoto\", e);\n    },\n    handleClickMask(e: MouseEvent) {\n      this.$emit(\"clickMask\", e);\n    },\n    handleClickClose() {\n      this.$emit(\"closeModal\");\n    },\n    getTransition() {\n      const transition = \"transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)\";\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover) {\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n","<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","import { App } from 'vue';\nimport PhotoProvider from './PhotoProvider/index.vue';\nimport PhotoConsumer from './PhotoConsumer/index.vue';\nimport PhotoSlider from './PhotoSlider/index.vue';\n\nconst components = [\n  PhotoProvider,\n  PhotoConsumer,\n  PhotoSlider\n];\n\nconst install = (app: App): void  => {\n  components.forEach(component => {\n    app.component(component.name, component);\n  });\n};\n\nexport * from './types';\n\nexport { PhotoProvider, PhotoConsumer, PhotoSlider };\n\nexport default { install };\n"],"names":["_createElementVNode","_hoisted_2","_createElementBlock","_hoisted_1","freeGlobal","root","Symbol","objectProto","nativeObjectToString","symToStringTag","FUNC_ERROR_TEXT","now","_createBlock","_hoisted_3","_hoisted_4","_createVNode","_createCommentVNode","_renderSlot","isArray","PhotoProvider","PhotoConsumer","PhotoSlider"],"mappings":"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"}