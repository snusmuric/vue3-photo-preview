{"version":3,"file":"vue3-photo-preview.umd.js","sources":["../src/symbols.ts","../src/PhotoProvider/useItems.ts","../src/PhotoProvider/useVisible.ts","../src/PhotoProvider/useIndex.ts","../src/PhotoView/Spinner.vue","../src/PhotoView/Spinner.vue?vue&type=template&id=bfba7e90&lang.js","../src/utils/getSuitableImageSize.ts","../src/PhotoView/useLoadImage.ts","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/now.js","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/debounce.js","../node_modules/lodash-es/throttle.js","../src/PhotoView/useWindowResize.ts","../src/types.ts","../src/utils/getAnimateOrigin.ts","../src/utils/isTouchDevice.ts","../src/constant.ts","../src/utils/withContinuousTap.ts","../src/utils/getPositionOnMoveOrScale.ts","../src/utils/getEdgeInfo.ts","../src/utils/getMultipleTouchPosition.ts","../src/PhotoView/useMoveImage.ts","../src/PhotoView/index.vue","../src/PhotoView/index.vue?vue&type=template&id=10b188d1&lang.js","../src/PhotoSlider/useBodyEffect.ts","../src/PhotoSlider/useInnerWidth.ts","../src/PhotoSlider/Close.vue","../src/PhotoSlider/Close.vue?vue&type=template&id=112c245a&lang.js","../src/PhotoSlider/ArrowLeft.vue","../src/PhotoSlider/ArrowLeft.vue?vue&type=template&id=6e2f760b&lang.js","../src/PhotoSlider/ArrowRight.vue","../src/PhotoSlider/ArrowRight.vue?vue&type=template&id=d5f73570&lang.js","../src/PhotoSlider/RotateLeft.vue","../src/PhotoSlider/RotateLeft.vue?vue&type=template&id=b2d23392&lang.js","../src/PhotoSlider/RotateRight.vue","../src/PhotoSlider/RotateRight.vue?vue&type=template&id=698afa9c&lang.js","../src/PhotoSlider/FlipHorizontal.vue","../src/PhotoSlider/FlipHorizontal.vue?vue&type=template&id=15ac38a6&lang.js","../src/PhotoSlider/FilpVertical.vue","../src/PhotoSlider/FilpVertical.vue?vue&type=template&id=9ff3a8dc&lang.js","../src/PhotoSlider/Download.vue","../src/PhotoSlider/Download.vue?vue&type=template&id=7428b2fd&lang.js","../src/PhotoSlider/useAnimationHandle.ts","../src/PhotoSlider/index.vue","../src/PhotoSlider/index.vue?vue&type=template&id=6c981bcd&lang.js","../src/PhotoProvider/index.vue","../src/PhotoProvider/index.vue?vue&type=template&id=4c12d6c6&lang.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/uniqueId.js","../src/PhotoConsumer/index.vue","../src/PhotoConsumer/index.vue?vue&type=template&id=1325df3c&lang.js","../src/index.ts"],"sourcesContent":["import { UpdateItemType, RemoveItemType, HandleShowType } from './types';\nimport { InjectionKey } from 'vue';\n\nexport const updateItemKey: InjectionKey<UpdateItemType> = Symbol();\n\nexport const removeItemKey: InjectionKey<RemoveItemType> = Symbol();\n\nexport const handleShowKey: InjectionKey<HandleShowType> = Symbol();\n","import { ref, Ref } from 'vue';\nimport { ItemType, UpdateItemType, RemoveItemType } from '../types';\n\ntype useItemsReturn = {\n  items: Ref<ItemType[]>;\n  updateItem: UpdateItemType;\n  removeItem: RemoveItemType;\n}\n\nexport default function useItems(index: Ref<number>): useItemsReturn {\n  const items = ref<ItemType[]>([]);\n\n  const updateItem = (item: ItemType) => {\n    const index = items.value.findIndex(({ key }) => item.key === key);\n    if (index > -1) {\n      items.value.splice(index, 1, item);\n    } else {\n      items.value.push(item);\n    }\n  };\n\n  const removeItem = (key: string) => {\n    const nextItems = items.value.filter((item) => item.key !== key);\n    const nextEndIndex = nextItems.length - 1;\n\n    items.value = nextItems;\n    index.value = Math.min(index.value, nextEndIndex);\n  };\n\n  return {\n    items,\n    updateItem,\n    removeItem,\n  };\n}\n","import { ref, Ref } from 'vue';\nimport { HandleShowType, ItemType } from '../types';\n\ntype useVisibleReturn = {\n  visible: Ref<boolean>;\n  handleHide: () => void;\n  handleShow: HandleShowType;\n}\n\nexport default function useVisible(\n  items: Ref<ItemType[]>,\n  index: Ref<number>,\n  onVisibleChange: () => void\n): useVisibleReturn {\n  const visible = ref(false);\n\n  const handleHide = () => {\n    visible.value = false;\n    onVisibleChange();\n  };\n\n  const handleShow = (key: string) => {\n    const itemIndex = items.value.findIndex(item => item.key === key);\n    if (itemIndex > -1) {\n      index.value = itemIndex;\n      visible.value = true;\n      onVisibleChange();\n    }\n  };\n\n  return {\n    visible,\n    handleHide,\n    handleShow,\n  };\n}\n","import { ref, Ref } from 'vue';\n\ntype useIndexReturn = {\n  index: Ref<number>;\n  updateIndex: (newIndex: number) => void;\n}\n\nexport default function useIndex(onIndexChange: () => void): useIndexReturn {\n  const index = ref(0);\n\n  const updateIndex = (newIndex: number) => {\n    index.value = newIndex;\n    onIndexChange();\n  };\n\n  return {\n    index,\n    updateIndex,\n  };\n}\n","<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n","export default function getSuitableImageSize(\n  naturalWidth: number,\n  naturalHeight: number,\n  rotate: number,\n): {\n  width: number;\n  height: number;\n} {\n  let { innerWidth, innerHeight } = window;\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [innerWidth, innerHeight] = [innerHeight, innerWidth];\n  }\n\n  let width;\n  let height;\n\n  // 缩放到和窗口一样所需要的比例\n  const scaleWidth = innerWidth / naturalWidth;\n  const scaleHeight = innerHeight / naturalHeight;\n\n  if (naturalWidth < innerWidth && naturalHeight < innerHeight) {\n    // 如果图片原始宽度未超过容器尺寸，则使用原始尺寸\n    width = naturalWidth;\n    height = naturalHeight;\n  } else {\n    // 否则缩放图片使之恰好放入\n    if (scaleWidth < scaleHeight) {\n      width = innerWidth;\n      height = innerWidth * (naturalHeight / naturalWidth);\n    } else {\n      width = innerHeight * (naturalWidth / naturalHeight);\n      height = innerHeight;\n    }\n  }\n\n  return {\n    width,\n    height\n  };\n}\n","import { ref, Ref, watch } from 'vue';\nimport getSuitableImageSize from '../utils/getSuitableImageSize';\n\nexport default function useLoadImage(src: Ref<string>): {\n  width: Ref<number>;\n  height: Ref<number>;\n  loaded: Ref<boolean>;\n  naturalWidth: Ref<number>;\n  naturalHeight: Ref<number>;\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void;\n} {\n  const naturalWidth = ref(0);\n  const naturalHeight = ref(0);\n  const width = ref(0);\n  const height = ref(0);\n  const loaded = ref(false);\n\n  function setSuitableImageSize(actualWidth: number, actualHeight: number, rotate: number) {\n    const imageSize = getSuitableImageSize(actualWidth, actualHeight, rotate);\n    width.value = imageSize.width;\n    height.value = imageSize.height;\n  }\n\n  const loadImage = (src: string) => {\n    loaded.value = false;\n\n    const img = new Image();\n\n    img.onload = () => {\n      naturalWidth.value = img.naturalWidth;\n      naturalHeight.value = img.naturalHeight;\n      setSuitableImageSize(naturalWidth.value, naturalHeight.value, 0);\n      loaded.value = true;\n    };\n\n    img.src = src;\n  };\n\n  loadImage(src.value);\n\n  watch(src, () => {\n    loadImage(src.value);\n  });\n\n  return {\n    width,\n    height,\n    loaded,\n    naturalWidth,\n    naturalHeight,\n    setSuitableImageSize\n  };\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import { Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useWindowResize(\n  naturalWidth: Ref<number>, naturalHeight: Ref<number>, rotate: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n): void {\n\n  const handleResize = throttle(() => {\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n}\n","export type ItemType = {\n  // 唯一标识\n  key: string;\n  // 图片地址\n  src: string;\n  // 控住图片显示的节点\n  originRef?: HTMLElement | null;\n  // 图片介绍\n  intro?: string | null;\n  // 图片下载名称\n  downloadName?: string | null;\n}\n\nexport type OriginRectType = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n} | null;\n\nexport type UpdateItemType = (item: ItemType) => void;\n\nexport type RemoveItemType = (key: string) => void;\n\nexport type HandleShowType = (key: string) => void;\n\n// 动画类型\nexport enum ShowAnimateEnum {\n  None,\n  In,\n  Out,\n}\n\n// 触摸状态\nexport enum TouchTypeEnum {\n  Normal,\n  X, // x 轴只能水平切换图片\n  Y, // y 轴只能撤销图片\n  Scale, // 缩放模式\n}\n\n// 边缘状态\nexport enum EdgeTypeEnum {\n  Left,\n  Right,\n  Top,\n  Bottom,\n}\n","import { OriginRectType } from \"../types\";\n\nexport default function getAnimateOrigin(originRect: OriginRectType): string | null {\n  if (originRect) {\n    const { innerWidth, innerHeight } = window;\n    // 动画的元素宽高为 0，计算触发的点的中心到中点的距离即是 AnimateOrigin（粗略计算）\n    const xOrigin = originRect.left + originRect.width / 2 - innerWidth / 2;\n    const yOrigin = originRect.top + originRect.height / 2 - innerHeight / 2;\n    return `${xOrigin}px ${yOrigin}px`;\n  }\n  return null;\n}\n","/**\n * 当前设备是否支持触摸事件\n */\nconst isTouchDevice = typeof document !== 'undefined' && 'ontouchstart' in document.documentElement;\n\nexport default isTouchDevice;\n","/**\n * 图片间隔\n */\nexport const horizontalOffset = 20;\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset = 10;\n\n/**\n * 最小切换图片距离\n */\nexport const minSwitchImageOffset = 40;\n\n/**\n * 最大缩放度（若图片足够大，则会超出该值）\n */\nexport const maxScale = 6;\n","import debounce from 'lodash-es/debounce';\n\nexport type TapFuncType<T> = (...args: T[]) => void;\n\nexport default function withContinuousTap<T>(\n  singleTap: TapFuncType<T>,\n  doubleTap: TapFuncType<T>\n): TapFuncType<T> {\n  // 当前连续点击次数\n  let continuousCount = 0;\n\n  const withSingleTap = debounce((...args) => {\n    continuousCount = 0;\n    singleTap(...args);\n  }, 300);\n\n  return function invokeTap(...args) {\n    continuousCount += 1;\n    withSingleTap(...args);\n    if (continuousCount >= 2) {\n      withSingleTap.cancel();\n      continuousCount = 0;\n      doubleTap(...args);\n    }\n  };\n}\n","/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale({\n  x,\n  y,\n  clientX,\n  clientY,\n  fromScale,\n  toScale\n}: {\n  x: number,\n  y: number,\n  clientX: number,\n  clientY: number,\n  fromScale: number,\n  toScale: number\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { innerWidth, innerHeight } = window;\n  // 缩放前的图片的中心坐标\n  const imageCenterClientX = innerWidth / 2 + x;\n  const imageCenterClientY = innerHeight / 2 + y;\n  // 放大偏移量\n  const offsetScale = toScale / fromScale;\n  // 缩放后的偏移量(为保证点击的点相对于视图位置不变，需要将缩放多出来的尺寸通过 translate 平衡掉)\n  const originX = -(clientX - imageCenterClientX) * (offsetScale - 1);\n  const originY = -(clientY - imageCenterClientY) * (offsetScale - 1);\n\n  return {\n    x: originX + x,\n    y: originY + y,\n    scale: toScale,\n  };\n}\n","import { EdgeTypeEnum } from '../types';\n\n/**\n * 获取图片拖拽到边缘需要的值\n */\nexport function getEdgeInfo({\n  width,\n  height,\n  scale,\n  rotate,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number\n}): {\n  edgeLeft: number,\n  edgeRight: number,\n  edgeTop: number,\n  edgeBottom: number,\n} {\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [width, height] = [height, width];\n  }\n\n  const { innerWidth, innerHeight } = window;\n  const currentWidth = width * scale;\n  const currentHeight = height * scale;\n\n  let edgeLeft, edgeRight, edgeTop, edgeBottom;\n\n  if (currentWidth > innerWidth) {\n    edgeLeft = (currentWidth - innerWidth) / 2;\n    edgeRight = -(currentWidth - innerWidth) / 2;\n  } else {\n    edgeLeft = 0;\n    edgeRight = 0;\n  }\n\n  if (currentHeight > innerHeight) {\n    edgeTop = (currentHeight - innerHeight) / 2;\n    edgeBottom = -(currentHeight - innerHeight) / 2;\n  } else {\n    edgeTop = 0;\n    edgeBottom = 0;\n  }\n\n  return {\n    edgeLeft,\n    edgeRight,\n    edgeTop,\n    edgeBottom,\n  };\n}\n\n/**\n * 获取边缘类型\n */\nexport function getEdgeTypes({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): EdgeTypeEnum[] {\n  const position = getEdgeInfo({ width, height, scale, rotate });\n  const edgeTypes: EdgeTypeEnum[] = [];\n\n  if (x === position.edgeLeft) {\n    edgeTypes.push(EdgeTypeEnum.Left);\n  }\n  if (x === position.edgeRight) {\n    edgeTypes.push(EdgeTypeEnum.Right);\n  }\n  if (y === position.edgeTop) {\n    edgeTypes.push(EdgeTypeEnum.Top);\n  }\n  if (y === position.edgeBottom) {\n    edgeTypes.push(EdgeTypeEnum.Bottom);\n  }\n\n  return edgeTypes;\n}\n\n/**\n * 获取标准值\n */\nexport function getStandardPosition({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { edgeLeft, edgeRight, edgeTop, edgeBottom } = getEdgeInfo({ width, height, scale, rotate });\n\n  if (x > edgeLeft) {\n    x = edgeLeft;\n  }\n  if (x < edgeRight) {\n    x = edgeRight;\n  }\n  if (y > edgeTop) {\n    y = edgeTop;\n  }\n  if (y < edgeBottom) {\n    y = edgeBottom;\n  }\n\n  return { x, y, scale };\n}\n","/**\n * 从 Touch 事件中获取两个触控中心的位置\n * @param e TouchEvent\n */\nexport default function getMultipleTouchPosition(e: TouchEvent): {\n  clientX: number,\n  clientY: number,\n  touchLength: number\n} {\n  const { clientX, clientY } = e.touches[0];\n  if (e.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = e.touches[1];\n    return {\n      clientX: (clientX + nextClientX) / 2,\n      clientY: (clientY + nextClientY) / 2,\n      touchLength: Math.sqrt(Math.pow(nextClientX - clientX, 2) + Math.pow(nextClientY - clientY, 2)),\n    };\n  }\n  return { clientX, clientY, touchLength: 0 };\n}\n","import { Ref, ref } from 'vue';\nimport isTouchDevice from '../utils/isTouchDevice';\nimport throttle from 'lodash-es/throttle';\nimport { TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport { minStartTouchOffset, maxScale } from '../constant';\nimport withContinuousTap from '../utils/withContinuousTap';\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale';\nimport { getStandardPosition, getEdgeTypes } from '../utils/getEdgeInfo';\nimport getMultipleTouchPosition from '../utils/getMultipleTouchPosition';\n\ntype useMoveImageReturn = {\n  x: Ref<number>;\n  y: Ref<number>;\n  scale: Ref<number>;\n  rotate: Ref<number>;\n  touched: Ref<boolean>;\n  handleMouseDown: (e: MouseEvent) => void;\n  handleTouchStart: (e: TouchEvent) => void;\n  handleWheel: (e: WheelEvent) => void;\n  handleRotateLeft: () => void;\n  handleRotateRight: () => void;\n}\n\nexport default function useMoveImage(\n  width: Ref<number>,\n  height: Ref<number>,\n  naturalWidth: Ref<number>,\n  naturalHeight: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n  onTouchStart: (clientX: number, clientY: number) => void,\n  onTouchMove: (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onTouchEnd: (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onSingleTap: (clientX: number, clientY: number) => void,\n): useMoveImageReturn {\n  // 图片 x 偏移量\n  const x = ref(0);\n  // 图片 y 偏移量\n  const y = ref(0);\n  // 图片缩放程度\n  const scale = ref(1);\n  // 图片旋转角度\n  const rotate = ref(0);\n  // 图片是否处于触摸状态\n  const touched = ref(false);\n  // 触摸开始时 x 的坐标\n  const clientX = ref(0);\n  // 触摸开始时 y 的坐标\n  const clientY = ref(0);\n  // 初始触摸状态\n  const touchType = ref(TouchTypeEnum.Normal);\n  // 上一次图片的 x 偏移量\n  const lastX = ref(0);\n  // 上一次图片的 y 偏移量\n  const lastY = ref(0);\n  // 上一次 touch 的长度\n  const lastTouchLength = ref(0);\n  // 边缘状态(用于缩放图片判断)\n  let edgeTypes: EdgeTypeEnum[] = [];\n\n  const handleMouseDown = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleDown(e.clientX, e.clientY, 0);\n\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchStart = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleDown(touch.clientX, touch.clientY, touch.touchLength);\n\n    window.addEventListener('touchmove', handleTouchMove);\n    window.addEventListener('touchend', handleTouchEnd);\n  };\n\n  const handleDown = (newClientX: number, newClientY: number, touchLength: number) => {\n    touched.value = true;\n    clientX.value = newClientX;\n    clientY.value = newClientY;\n    lastTouchLength.value = touchLength;\n    edgeTypes = getEdgeTypes({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: lastX.value,\n      y: lastY.value\n    });\n\n    onTouchStart(newClientX, newClientY);\n  };\n\n  const handleMouseMove = (e: MouseEvent) => {\n    if (isTouchDevice || !touched.value) return;\n\n    handleMove(e.clientX, e.clientY, 0);\n  };\n\n  const handleTouchMove = (e: TouchEvent) => {\n    if (!isTouchDevice || !touched.value) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleMove(touch.clientX, touch.clientY, touch.touchLength);\n  };\n\n  const handleMove = throttle((newClientX: number, newClientY: number, touchLength: number) => {\n    // 初始化触摸状态\n    if (touchType.value === TouchTypeEnum.Normal) {\n      if (scale.value !== 1 || touchLength) {\n        touchType.value = TouchTypeEnum.Scale;\n      } else {\n        const isMoveX = Math.abs(newClientX - clientX.value) > minStartTouchOffset;\n        const isMoveY = Math.abs(newClientY - clientY.value) > minStartTouchOffset;\n\n        if (!isMoveX && !isMoveY) return;\n\n        // 水平方向优先\n        touchType.value = isMoveX ? TouchTypeEnum.X : TouchTypeEnum.Y;\n      }\n    }\n\n    onTouchMove(touchType.value, newClientX, newClientY, edgeTypes);\n\n    const newX = newClientX - clientX.value;\n    const newY = newClientY - clientY.value;\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = newX + lastX.value;\n      y.value = newY + lastY.value;\n    }\n    if (touchType.value === TouchTypeEnum.Scale) {\n      if (touchLength) {\n        const endScale = scale.value + ((touchLength - lastTouchLength.value) / 100 / 2) * scale.value;\n        const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n        handleToScale(toScale, newClientX, newClientY);\n        lastTouchLength.value = touchLength;\n      } else {\n        // 处于左边缘情况，右划交给父级处理，处于右边缘情况，左划交给父级处理\n        if (\n          !(newX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) &&\n          !(newX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n        ) {\n          x.value = newX + lastX.value;\n        }\n        y.value = newY + lastY.value;\n      }\n    }\n  }, 8, { trailing: false });\n\n  const handleMouseUp = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleUp(e.clientX, e.clientY);\n\n    window.removeEventListener('mousemove', handleMouseMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = e.changedTouches[0];\n    handleUp(touch.clientX, touch.clientY);\n\n    window.removeEventListener('touchmove', handleTouchMove);\n    window.removeEventListener('touchend', handleTouchEnd);\n  };\n\n  const onDoubleTap = (newClientX: number, newClientY: number) => {\n    if (touchType.value !== TouchTypeEnum.Normal) return;\n\n    if (scale.value === 1) {\n      const toScale = Math.max(2, naturalWidth.value / width.value);\n      const position = getPositionOnMoveOrScale({\n        x: x.value,\n        y: y.value,\n        clientX: newClientX,\n        clientY: newClientY,\n        fromScale: scale.value,\n        toScale,\n      });\n\n      x.value = position.x;\n      y.value = position.y;\n      scale.value = position.scale;\n    } else {\n      x.value = 0;\n      y.value = 0;\n      scale.value = 1;\n    }\n  };\n\n  const onTap = withContinuousTap<number>(onSingleTap, onDoubleTap);\n\n  const handleUp = (newClientX: number, newClientY: number) => {\n    if (clientX.value === newClientX && clientY.value === newClientY) {\n      onTap(newClientX, newClientY);\n    }\n\n    onTouchEnd(touchType.value, newClientX, newClientY, edgeTypes);\n\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = 0;\n      y.value = 0;\n    }\n\n    if (touchType.value === TouchTypeEnum.Scale) {\n      setStandardPosition({\n        width: width.value,\n        height: height.value,\n        scale: scale.value,\n        rotate: rotate.value,\n        x: x.value,\n        y: y.value\n      });\n    }\n\n    touched.value = false;\n    touchType.value = TouchTypeEnum.Normal;\n    clientX.value = 0;\n    clientY.value = 0;\n    lastX.value = x.value;\n    lastY.value = y.value;\n  };\n\n  const handleWheel = (e: WheelEvent) => {\n    const endScale = scale.value - e.deltaY / 100 / 2;\n    const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n    handleToScale(toScale, e.clientX, e.clientY);\n  };\n\n  const handleToScale = (newScale: number, newClientX: number, newClientY: number) => {\n    const position = getPositionOnMoveOrScale({\n      x: x.value,\n      y: y.value,\n      clientX: newClientX,\n      clientY: newClientY,\n      fromScale: scale.value,\n      toScale: newScale,\n    });\n\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: position.scale,\n      rotate: rotate.value,\n      x: position.x,\n      y: position.y\n    });\n  };\n\n  const setStandardPosition = (position: {\n    width: number; height: number; scale: number; rotate: number; x: number, y: number\n  }) => {\n    const standardPosition = getStandardPosition(position);\n    x.value = standardPosition.x;\n    y.value = standardPosition.y;\n    lastX.value = standardPosition.x;\n    lastY.value = standardPosition.y;\n    scale.value = standardPosition.scale;\n  };\n\n  const handleRotateLeft = () => {\n    rotate.value = rotate.value - 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  const handleRotateRight = () => {\n    rotate.value = rotate.value + 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  return {\n    x,\n    y,\n    scale,\n    touched,\n    handleMouseDown,\n    handleTouchStart,\n    handleWheel,\n    rotate,\n    handleRotateLeft,\n    handleRotateRight\n  };\n}\n","<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect)\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :width=\"width\"\n        :height=\"height\"\n        :src=\"src\"\n        :style=\"{\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number) => {\n      emit('singleTap', clientX, clientY);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const transform: Record<string, string> = {\n        translate3d: `${this.x}px, ${this.y}px, 0`,\n        scaleX: `${this.isFlipHorizontal ? '-' : ''}${this.scale}`,\n        scaleY: `${this.isFlipVertical ? '-' : ''}${this.scale}`\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      cursor: grab;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect)\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :width=\"width\"\n        :height=\"height\"\n        :src=\"src\"\n        :style=\"{\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number) => {\n      emit('singleTap', clientX, clientY);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const transform: Record<string, string> = {\n        translate3d: `${this.x}px, ${this.y}px, 0`,\n        scaleX: `${this.isFlipHorizontal ? '-' : ''}${this.scale}`,\n        scaleY: `${this.isFlipVertical ? '-' : ''}${this.scale}`\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      cursor: grab;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n","import { Ref, watch } from \"vue\";\n\nexport default function useBodyEffect(\n  visible: Ref<boolean>,\n  rootElement?: string | HTMLElement\n): void {\n  const root =\n    rootElement && typeof rootElement === \"string\"\n      ? (document.querySelector(rootElement) as HTMLElement)\n      : (rootElement as HTMLElement);\n  const { style } = root ? root : document.body;\n  const originalOverflow = style.overflow;\n\n  watch(visible, () => {\n    if (visible.value) {\n      style.overflow = \"hidden\";\n    } else {\n      style.overflow = originalOverflow;\n    }\n  });\n}\n","import { ref, Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useInnerWidth(): { innerWidth: Ref<number> } {\n  const innerWidth = ref(window.innerWidth);\n\n  const handleResize = throttle(() => {\n    innerWidth.value = window.innerWidth;\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n\n  return {\n    innerWidth\n  };\n}\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","import { Ref, ref, watch } from 'vue';\nimport { ItemType, ShowAnimateEnum, OriginRectType } from '../types';\n\ntype useAnimationHandleReturn = {\n  photoVisible: Ref<boolean>;\n  showAnimateType: Ref<ShowAnimateEnum>;\n  originRect: Ref<OriginRectType>;\n  onShowAnimateEnd: () => void;\n}\n\nexport default function useAnimationHandle(visible: Ref<boolean>, currentItem: Ref<ItemType>): useAnimationHandleReturn {\n  const photoVisible = ref(visible.value);\n  const showAnimateType = ref<ShowAnimateEnum>(ShowAnimateEnum.None);\n  const originRect = ref<OriginRectType>(null);\n\n  watch(visible, () => {\n    const originRef = currentItem.value.originRef;\n    // 点击打开按钮和关闭时收集位置信息，用于过渡动画\n    if (originRef && originRef.nodeType === 1 && originRef.children.length > 0) {\n      const { top, left, width, height } = originRef.getBoundingClientRect();\n      originRect.value = {\n        left, top, width, height\n      };\n    } else {\n      originRect.value = null;\n    }\n\n    if (visible.value) {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.In;\n      // 显示图片\n      photoVisible.value = true;\n    } else {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.Out;\n    }\n  });\n\n  // 动画结束的回调\n  const onShowAnimateEnd = () => {\n    // 动画完成才关闭弹窗\n    if (showAnimateType.value === ShowAnimateEnum.Out) {\n      photoVisible.value = false;\n    }\n    showAnimateType.value = ShowAnimateEnum.None;\n  };\n\n  return {\n    photoVisible,\n    showAnimateType,\n    originRect,\n    onShowAnimateEnd\n  };\n}\n","<template>\n  <teleport :to=\"teleportTo\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        PhotoSlider__Clean: showAnimateType !== ShowAnimateEnum.None,\n        PhotoSlider__Hide: !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          PhotoSlider__fadeIn: showAnimateType === ShowAnimateEnum.In,\n          PhotoSlider__fadeOut: showAnimateType === ShowAnimateEnum.Out,\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download class=\"PhotoSlider__BannerIcon\" @click=\"handleDownload\" />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <filp-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close class=\"PhotoSlider__BannerIcon\" @click=\"handleClickClose\" />\n        </div>\n      </div>\n      <div\n        v-for=\"item in items\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: `${(innerWidth + horizontalOffset) * getItemIndex(item)}px`,\n          transition: getTransition(),\n          transform: `translate3d(${\n            -(innerWidth + horizontalOffset) * index + touchMoveX\n          }px, 0px, 0px)`,\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"setPhotoViewRef\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop=\"handleClickPhoto\"\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div v-if=\"currentItem.intro\" class=\"PhotoSlider__FooterWrap\">\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, toRefs, PropType } from \"vue\";\nimport PhotoView from \"../PhotoView/index.vue\";\nimport { horizontalOffset, minSwitchImageOffset } from \"../constant\";\nimport useBodyEffect from \"./useBodyEffect\";\nimport useInnerWidth from \"./useInnerWidth\";\nimport Close from \"./Close.vue\";\nimport ArrowLeft from \"./ArrowLeft.vue\";\nimport ArrowRight from \"./ArrowRight.vue\";\nimport RotateLeft from \"./RotateLeft.vue\";\nimport RotateRight from \"./RotateRight.vue\";\nimport FlipHorizontal from \"./FlipHorizontal.vue\";\nimport FilpVertical from \"./FilpVertical.vue\";\nimport Download from \"./Download.vue\";\nimport useAnimationHandle from \"./useAnimationHandle\";\nimport {\n  ItemType,\n  ShowAnimateEnum,\n  TouchTypeEnum,\n  EdgeTypeEnum,\n} from \"../types\";\nimport isTouchDevice from \"../utils/isTouchDevice\";\n\nexport default defineComponent({\n  name: \"PhotoSlider\",\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FilpVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * Specifies a place in a DOM (target container) where PhotoSlider will be injected\n     * Could bequery selector or HtmlElement\n     */\n    teleportTo: {\n      type: [String, HTMLElement],\n      default: \"body\",\n    },\n  },\n  emits: [\"clickPhoto\", \"clickMask\", \"changeIndex\", \"closeModal\", \"singleTap\"],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible, props.teleportTo);\n    const { photoVisible, showAnimateType, originRect, onShowAnimateEnd } =\n      useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // photo-view 子组件\n      photoViewRefs: [] as InstanceType<typeof PhotoView>[],\n    };\n  },\n  created() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = [];\n  },\n  methods: {\n    handleDownload() {\n      const item = this.items[this.index];\n      const a = document.createElement(\"a\");\n      const paths = item.src.split(\".\")[0].split(\"/\");\n      const name = paths[paths.length - 1];\n      a.download = item.downloadName || name;\n      a.href = item.src;\n      a.dispatchEvent(new MouseEvent(\"click\"));\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.index].toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.index].toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.index].handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.index].handleRotateRight();\n    },\n    setPhotoViewRef(ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs.push(ref);\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case \"ArrowLeft\":\n            this.handlePrevious();\n            break;\n          case \"ArrowRight\":\n            this.handleNext();\n            break;\n          case \"Escape\":\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap() {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit(\"singleTap\");\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 第一张和最后一张超出时拖拽距离减半\n      if (\n        (this.index === 0 && touchMoveX > 0) ||\n        (this.index === this.items.length - 1 && touchMoveX < 0)\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(\n          this.defaultBackdropOpacity,\n          this.defaultBackdropOpacity - touchMoveY / 100 / 4\n        ),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (\n        offsetX < -minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Right)\n      ) {\n        this.handleNext();\n      }\n      // 上一张\n      if (\n        offsetX > minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Left)\n      ) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit(\"closeModal\");\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    getItemIndex(item: ItemType) {\n      return this.items.findIndex(({ key }) => key === item.key);\n    },\n    handlePrevious() {\n      if (this.index > 0) {\n        this.$emit(\"changeIndex\", this.index - 1);\n      }\n    },\n    handleNext() {\n      if (this.index < this.items.length - 1) {\n        this.$emit(\"changeIndex\", this.index + 1);\n      }\n    },\n    handleClickPhoto(e: MouseEvent) {\n      this.$emit(\"clickPhoto\", e);\n    },\n    handleClickMask(e: MouseEvent) {\n      this.$emit(\"clickMask\", e);\n    },\n    handleClickClose() {\n      this.$emit(\"closeModal\");\n    },\n    getTransition() {\n      const transition = \"transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)\";\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover) {\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <teleport :to=\"teleportTo\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        PhotoSlider__Clean: showAnimateType !== ShowAnimateEnum.None,\n        PhotoSlider__Hide: !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          PhotoSlider__fadeIn: showAnimateType === ShowAnimateEnum.In,\n          PhotoSlider__fadeOut: showAnimateType === ShowAnimateEnum.Out,\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download class=\"PhotoSlider__BannerIcon\" @click=\"handleDownload\" />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <filp-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close class=\"PhotoSlider__BannerIcon\" @click=\"handleClickClose\" />\n        </div>\n      </div>\n      <div\n        v-for=\"item in items\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: `${(innerWidth + horizontalOffset) * getItemIndex(item)}px`,\n          transition: getTransition(),\n          transform: `translate3d(${\n            -(innerWidth + horizontalOffset) * index + touchMoveX\n          }px, 0px, 0px)`,\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"setPhotoViewRef\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop=\"handleClickPhoto\"\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div v-if=\"currentItem.intro\" class=\"PhotoSlider__FooterWrap\">\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, toRefs, PropType } from \"vue\";\nimport PhotoView from \"../PhotoView/index.vue\";\nimport { horizontalOffset, minSwitchImageOffset } from \"../constant\";\nimport useBodyEffect from \"./useBodyEffect\";\nimport useInnerWidth from \"./useInnerWidth\";\nimport Close from \"./Close.vue\";\nimport ArrowLeft from \"./ArrowLeft.vue\";\nimport ArrowRight from \"./ArrowRight.vue\";\nimport RotateLeft from \"./RotateLeft.vue\";\nimport RotateRight from \"./RotateRight.vue\";\nimport FlipHorizontal from \"./FlipHorizontal.vue\";\nimport FilpVertical from \"./FilpVertical.vue\";\nimport Download from \"./Download.vue\";\nimport useAnimationHandle from \"./useAnimationHandle\";\nimport {\n  ItemType,\n  ShowAnimateEnum,\n  TouchTypeEnum,\n  EdgeTypeEnum,\n} from \"../types\";\nimport isTouchDevice from \"../utils/isTouchDevice\";\n\nexport default defineComponent({\n  name: \"PhotoSlider\",\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FilpVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * Specifies a place in a DOM (target container) where PhotoSlider will be injected\n     * Could bequery selector or HtmlElement\n     */\n    teleportTo: {\n      type: [String, HTMLElement],\n      default: \"body\",\n    },\n  },\n  emits: [\"clickPhoto\", \"clickMask\", \"changeIndex\", \"closeModal\", \"singleTap\"],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible, props.teleportTo);\n    const { photoVisible, showAnimateType, originRect, onShowAnimateEnd } =\n      useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // photo-view 子组件\n      photoViewRefs: [] as InstanceType<typeof PhotoView>[],\n    };\n  },\n  created() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = [];\n  },\n  methods: {\n    handleDownload() {\n      const item = this.items[this.index];\n      const a = document.createElement(\"a\");\n      const paths = item.src.split(\".\")[0].split(\"/\");\n      const name = paths[paths.length - 1];\n      a.download = item.downloadName || name;\n      a.href = item.src;\n      a.dispatchEvent(new MouseEvent(\"click\"));\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.index].toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.index].toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.index].handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.index].handleRotateRight();\n    },\n    setPhotoViewRef(ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs.push(ref);\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case \"ArrowLeft\":\n            this.handlePrevious();\n            break;\n          case \"ArrowRight\":\n            this.handleNext();\n            break;\n          case \"Escape\":\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap() {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit(\"singleTap\");\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 第一张和最后一张超出时拖拽距离减半\n      if (\n        (this.index === 0 && touchMoveX > 0) ||\n        (this.index === this.items.length - 1 && touchMoveX < 0)\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(\n          this.defaultBackdropOpacity,\n          this.defaultBackdropOpacity - touchMoveY / 100 / 4\n        ),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(\n      touchType: TouchTypeEnum,\n      clientX: number,\n      clientY: number,\n      edgeTypes: EdgeTypeEnum[]\n    ) {\n      if (touchType === TouchTypeEnum.Scale) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (\n        offsetX < -minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Right)\n      ) {\n        this.handleNext();\n      }\n      // 上一张\n      if (\n        offsetX > minSwitchImageOffset &&\n        edgeTypes.includes(EdgeTypeEnum.Left)\n      ) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit(\"closeModal\");\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    getItemIndex(item: ItemType) {\n      return this.items.findIndex(({ key }) => key === item.key);\n    },\n    handlePrevious() {\n      if (this.index > 0) {\n        this.$emit(\"changeIndex\", this.index - 1);\n      }\n    },\n    handleNext() {\n      if (this.index < this.items.length - 1) {\n        this.$emit(\"changeIndex\", this.index + 1);\n      }\n    },\n    handleClickPhoto(e: MouseEvent) {\n      this.$emit(\"clickPhoto\", e);\n    },\n    handleClickMask(e: MouseEvent) {\n      this.$emit(\"clickMask\", e);\n    },\n    handleClickClose() {\n      this.$emit(\"closeModal\");\n    },\n    getTransition() {\n      const transition = \"transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)\";\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover) {\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover) {\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n","<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","import { App } from 'vue';\nimport PhotoProvider from './PhotoProvider/index.vue';\nimport PhotoConsumer from './PhotoConsumer/index.vue';\nimport PhotoSlider from './PhotoSlider/index.vue';\n\nconst components = [\n  PhotoProvider,\n  PhotoConsumer,\n  PhotoSlider\n];\n\nconst install = (app: App): void  => {\n  components.forEach(component => {\n    app.component(component.name, component);\n  });\n};\n\nexport * from './types';\n\nexport { PhotoProvider, PhotoConsumer, PhotoSlider };\n\nexport default { install };\n"],"names":["ref","defineComponent","_createElementVNode","_hoisted_2","_createElementBlock","_hoisted_1","watch","freeGlobal","root","Symbol","objectProto","nativeObjectToString","symToStringTag","FUNC_ERROR_TEXT","now","onBeforeUnmount","ShowAnimateEnum","TouchTypeEnum","EdgeTypeEnum","toRefs","_createBlock","_hoisted_3","_hoisted_4","computed","_createVNode","provide","_createCommentVNode","_renderSlot","isArray","inject","onMounted","PhotoProvider","PhotoConsumer","PhotoSlider"],"mappings":"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"}